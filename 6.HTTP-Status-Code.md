## 1. HTTP 상태코드 소개

### 상태코드
클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능
- 1xx (Information) : 요청이 수신되어 처리중
- 2xx (Successful) : 요청 정상 처리 
- 3xx (Redirection) : 요청을 완료하려면 추가 행동 필요
- 4xx (Client Error) : 클라이언트 오류, 잘못된 문법 등으로 서버가 요청 수행 불가
- 5xx (Sever Error) : 서버 오류, 서버가 정상 요청을 처리 불가

> **상태코드를 몰라도 상위 상태코드를 보고 파악하면 된다.**


## 2. 2xx - 성공 (Successful)
### 클라이언트의 요청을 성공적으로 처리
- 200 OK
- 201 Created
- 202 Accepted
- 204 No Content 

### 200 OK
#### 요청성공
![](https://velog.velcdn.com/images/f1v3/post/9744afd5-4fd0-4daa-ae00-94c8671ba1a2/image.png)


### 201 Created
#### 요청 성공, 새로운 리소스 생성
![](https://velog.velcdn.com/images/f1v3/post/74d14620-eceb-4d1f-8360-6ba23ebba04c/image.png)
- POST인 경우는 서버에서 자원을 생성 및 URI 관리
- 새로 생성된 URI의 경로를 넣어줌

### 202 Accepted
#### 요청이 접수는 되었으나 처리되지 않음
- 배치 처리같은 곳에서 사용

### 204 No Content
#### 서버가 요청을 성공적으로 수행했지만 응답 페이로드 본문에 보낼 데이터가 없음
- ex. 웹 문서 편집기에서 저장(save) 버튼
- save 버튼의 결과로 아무 내용이 없어도 되고, 같은 화면을 유지
- 결과 내용 없어도 204 메시지만으로 성공 인식 가능



## 3. 3xx - 리다이렉션
요청을 완료하기 위해 유저 에이전트의 추가 조치 필요

### 리다이렉션
- 웹 브라우저는 3XX 응답 결과에 Location 헤더가 있으면 그 위치로 자동으로 이동
### 종류
- 영구 리다이렉션 : 특성 리소스의 URI가 영구적으로 이동
- 일시 리다이렉션 : 일시적 변경
- 특수 리다이렉션 : 결과 대신 캐시를 사용

### 영구 리다이렉션 (301, 308)
- 원래 URL 사용 X, 검색 엔진 등에서도 변경을 인지해야 함
- **301 Moved Permanently** : 리다이렉트시 요청 메서드가 GET으로 변경, 본문 제거가 될 수 있음
  ![](https://velog.velcdn.com/images/f1v3/post/80955580-42e5-4740-862a-e11bf4f145e7/image.png)

- **308 Permanent Redirect** : 리다이렉트시 요청 메서드와 본문 유지
  ![](https://velog.velcdn.com/images/f1v3/post/e6c97f55-878d-4eb4-a402-6126b601f030/image.png)

### 일시 리다이렉션 (302, 307, 303)
- **302 Found** : 리다이렉트시 요청 메서드가 GET, 본문 제거가 될 수 있음
- **307 Temporary Redirect** : 리다이렉트시 요청 메서드와 본문 유지 (MUST NOT)
- **303 See Other** : 리다이렉트시 요청 메서드가 GET으로 변경


#### PRG: Post/Redirect/Get
- POST로 주문 후에 웹 브라우저를 새로고침하면?
- 새로고침은 다시 요청
- 중복 주문이 될 수 있다.

> **PRG 사용전** 
> ![](https://velog.velcdn.com/images/f1v3/post/8a6c75ab-8022-45f2-96ff-a1a68d507ec8/image.png)

- POST로 주문 후에 새로 고침으로 인한 중복 주문 방지
- POST로 주문 후에 주문 결과 화면을 GET 메서드로 리다이렉트
- 새로고침을 해도 결과 화면을 GET으로 조회
- 중복 주문 대신에 결과 화면만 GET으로 다시 요청

> **PRG 사용후** 
>![](https://velog.velcdn.com/images/f1v3/post/a98a3a25-9971-456a-b4a7-0882f09d6971/image.png)

- PRG 이후 리다이렉트를 통해 GET으로 결과 화면만 조회


#### 그래서 뭘 써야되는걸까?
- 307, 303을 권장하지만 기본값으로 302를 많이 사용
- 자동 리다이렉션시 GET으로 변해도 되면 그냥 302 쓰자


### 기타 리다이렉션 (300, 304)
- 300 Multiple Choices : 안씀
- 304 Not Modified
  - 캐시를 목적으로 사용
  - 클라이언트에게 리소스가 수정되지 않았음을 알려줌 = 캐시로 리다이렉트
  - 304 응답은 메시지 바디를 포함하면 안된다.
  - 조건부 GET, HEAD 요청시 사용

## 4. 4xx - 클라이언트 오류
- 오류의 원인이 클라이언트에 있다!
- **클라이언트가 이미 잘못된 요청, 데이터를 보내고 있기 때문에 똑같은 재시도 실패**

### 400 Bad Request
클라이언트가 잘못된 요청을 해서 서버가 요청을 처리할 수 없음
- 요청 구문, 메시지 등 오류 -> 클라이언트는 요청 내용을 다시 검토하고 보내도록 해야 함
  ex. 요청 파라미터, API 스펙이 맞지 않을 때

### 401 Unauthorized
**클라이언트가 해당 리소스에 대한 인증이 필요**
- 인증(Authentication) 되지 않음  
> 인증(Authentication) : 본인이 누구인지 확인 (로그인)  
> 인가(Authorization) : 권한 부여 (ADMIN과 같은 권한)  
> 오류 메시지가 Unauthorized인데 인증에 대한 부분임 (로그인이 되지 않음)  

### 403 Forbidden
**서버가 요청을 이해했지만 승인 거부**
- 인증 자격 증명은 있지만, 접근 권한이 불충분한 경우

### 404 Not Found
**요청 리소스를 찾을 수 없음**
- 요청 리소스가 서버에 없거나 권한이 없는데 접근한 경우 리소스를 숨기고 싶을 때


## 5. 5xx - 서버 오류
- **서버에 문제가 있기 때문에 재시도하면 성공할 수도 있음**

### 500 Internal Server Error
**서버 문제로 오류 발생, 애매하면 500 오류**

### 503 Service Unavailable
**서비스 이용 불가**
- 서버가 일시적 과부하 또는 예정된 작업으로 잠시 요청을 처리할 수 없음
- Retry-After 헤더 필드로 얼마 뒤에 복구되는지 보낼 수도 있음

> **주의 !**
> 5xx Error는 서버에서 웬만하면 만들면 안된다.  
> 진짜 서버에 에러가 있을 때 발생하도록 해야 한다!  
> 비즈니스 로직의 예외일 때가 아닌 서버에 정말 문제가 발생한 경우만  
